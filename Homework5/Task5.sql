DROP SCHEMA task5;
CREATE SCHEMA task5;
USE task5;

-- данные из файла 

CREATE TABLE  AUTO 
(       
	REGNUM VARCHAR(10) PRIMARY KEY, 
	MARK VARCHAR(10), 
	COLOR VARCHAR(15),
	RELEASEDT DATE, 
	PHONENUM VARCHAR(15)
);
-- AUTO
INSERT INTO AUTO (REGNUM, MARK,	COLOR, RELEASEDT, PHONENUM )
VALUES(111114,'LADA', 'КРАСНЫЙ', date'2008-01-01', '9152222221');

INSERT INTO AUTO (REGNUM, MARK,	COLOR, RELEASEDT, PHONENUM )
VALUES(111115,'VOLVO', 'КРАСНЫЙ', date'2013-01-01', '9173333334');

INSERT INTO AUTO (REGNUM, MARK,	COLOR, RELEASEDT, PHONENUM )
VALUES(111116,'BMW', 'СИНИЙ', date'2015-01-01', '9173333334');

INSERT INTO AUTO (REGNUM, MARK,	COLOR, RELEASEDT, PHONENUM )
VALUES(111121,'AUDI', 'СИНИЙ', date'2009-01-01', '9173333332');

INSERT INTO AUTO (REGNUM, MARK,	COLOR, RELEASEDT, PHONENUM )
VALUES(111122,'AUDI', 'СИНИЙ', date'2011-01-01', '9213333336');

INSERT INTO AUTO (REGNUM, MARK,	COLOR, RELEASEDT, PHONENUM )
VALUES(111113,'BMW', 'ЗЕЛЕНЫЙ', date'2007-01-01', '9214444444');

INSERT INTO AUTO (REGNUM, MARK,	COLOR, RELEASEDT, PHONENUM )
VALUES(111126,'LADA', 'ЗЕЛЕНЫЙ', date'2005-01-01', null);

INSERT INTO AUTO (REGNUM, MARK,	COLOR, RELEASEDT, PHONENUM )
VALUES(111117,'BMW', 'СИНИЙ', date'2005-01-01', null);

INSERT INTO AUTO (REGNUM, MARK,	COLOR, RELEASEDT, PHONENUM )
VALUES(111119,'LADA', 'СИНИЙ', date'2017-01-01', 9213333331);


-- 1. Создайте представление, в которое попадут автомобили стоимостью до 25 000 долларов

-- для выполнения задания добавим недостающие данные

ALTER TABLE AUTO
ADD COLUMN Price DECIMAL;

UPDATE AUTO SET Price  = (40000) WHERE REGNUM = 111121;
UPDATE AUTO SET Price  = (40000) WHERE REGNUM = 111122;
UPDATE AUTO SET Price  = (18000) WHERE REGNUM = 111113;
UPDATE AUTO SET Price  = (26000) WHERE REGNUM = 111114;
UPDATE AUTO SET Price  = (28000) WHERE REGNUM = 111115;
UPDATE AUTO SET Price  = (23000) WHERE REGNUM = 111116;
UPDATE AUTO SET Price  = (33000) WHERE REGNUM = 111117;
UPDATE AUTO SET Price  = (15000) WHERE REGNUM = 111119;
UPDATE AUTO SET Price  = (21000) WHERE REGNUM = 111126;

-- автомобили стоимостью до 25 000 долларов:

CREATE VIEW U25k_cars AS 
SELECT * FROM AUTO
WHERE Price < 25000;

SELECT * FROM U25k_cars;

-- Изменить в существующем представлении порог для стоимости: 
-- пусть цена будет до 30 000 долларов (используя оператор ALTER VIEW)

ALTER VIEW U25k_cars
AS SELECT *
FROM AUTO
WHERE Price < 30000;

SELECT * FROM U25k_cars;

-- Создайте представление, в котором будут только автомобили марки “Шкода” и “Ауди”

-- чтобы выполнить задание - добавим "Шкоду"

INSERT INTO AUTO (REGNUM, MARK,	COLOR, RELEASEDT, PHONENUM, Price)
VALUES (111127,'SCODA', 'ЧЕРНЫЙ', date'2017-12-01', 9213335531, 33000);

CREATE VIEW Scoda_Audi AS 
SELECT * FROM AUTO
WHERE MARK = 'SCODA' OR MARK = 'AUDI';

SELECT * FROM Scoda_Audi;